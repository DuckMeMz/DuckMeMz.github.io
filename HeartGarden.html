<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daniel Farnham | Project</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');

    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background-color: #1b1b1b;
      color: #e0e0e0;
    }

    header {
      background-color: #1b1b1b;
      padding: 16px 0;
      box-sizing: border-box;
      width: 100%;
    }

    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 10%;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header h1 {
      margin: 0;
      font-size: 2.5rem;
      color: #e0e0e0;
    }

    .header-links {
      display: flex;
      gap: 16px;
      align-items: center;
    }

    .header-links a {
      color: #e0e0e0;
      text-decoration: none;
      font-size: 1.5rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
      border-radius: 4px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .header-links a:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    }

    .header-links a.portfolio-button {
      border: 2px solid #fff;
      padding: 4px 32px;
      font-size: 1rem;
      font-weight: 700;
      background: transparent;
      color: #fff;
      width: auto;
      height: 32px;
      border-radius: 4px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .header-links a.portfolio-button:hover {
      background-color: #fff;
      color: #121212;
    }

    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0;
      box-sizing: border-box;
    }

    .back-link {
      display: inline-block;
      margin-bottom: 16px;
      color: #b0bec5;
      text-decoration: none;
      font-weight: 700;
      transition: color 0.3s ease;
    }

    .back-link:hover {
      color: #fff;
    }

    h2 {
      color: #e0e0e0;
      font-size: 2rem;
      margin-bottom: 16px;
    }

    h3{
            font-size: 28px;
            margin-bottom: 5px;
    }

    p{
            display: block;
            margin-block-start: 16 px;
            margin-block-end: 16 px;
            margin-inline-start: 0px;
            margin-inline-end: 0px;
    }

    /* Carousel styles */
    .carousel-container {
      position: relative;
      width: 100%;
      max-width: 1280px;
      margin: 20px auto;
      overflow: hidden;
      box-sizing: border-box;
    }

    .carousel-track {
      display: flex;
      transition: transform 0.5s ease;
      will-change: transform;
    }

    .carousel-item {
      flex: 0 0 100%;
      max-width: 100%;
      box-sizing: border-box;
      padding: 0 10px;
    }

    iframe {
      width: 100%;
      height: 720px;
      border: 0;
      display: block;
      border-radius: 8px;
      background: #000;
    }

    /* Navigation buttons */
    .carousel-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(255, 255, 255, 0.2);
      border: none;
      color: #e0e0e0;
      font-size: 2rem;
      padding: 8px 16px;
      cursor: pointer;
      border-radius: 4px;
      user-select: none;
      transition: background-color 0.3s ease;
      z-index: 10;
    }

    .carousel-button:hover {
      background-color: rgba(255, 255, 255, 0.5);
    }

    .carousel-button.prev {
      left: 10px;
    }

    .carousel-button.next {
      right: 10px;
    }

    /* Responsive */
    @media (max-width: 1400px) {
      iframe {
        height: 480px;
      }
    }

    @media (max-width: 800px) {
      iframe {
        height: 320px;
      }
    }

  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <h1>Daniel Farnham</h1>
      <nav class="header-links">
        <a href="https://www.linkedin.com/in/daniel-farnham-70100b265/" target="_blank" aria-label="LinkedIn">
          <img src="docs/assets/linkedin-app-white-icon.svg" alt="LinkedIn Logo" style="width: 24px; height: 24px;" />
        </a>
        <a href="https://github.com/DuckMeMz" target="_blank" aria-label="GitHub">
          <img src="docs/assets/github-mark-white.svg" alt="GitHub Logo" style="width: 24px; height: 24px;" />
        </a>
        <a href="https://drive.google.com/file/d/12ptyJqBauiJUpkNHk0LewvDObnaYB7-A/view?usp=sharing" 
           class="portfolio-button" target="_blank" rel="noopener noreferrer">
          Resume
        </a>
      </nav>
    </div>
  </header>

  <main>
    <h2>Heart Garden</h2>
     <p style="color: #b0bec5;; font-size: 15px; margin-top: -8px; margin-bottom: 12px;">
            Mark - 92/100
        </p>
    <a href="index.html" class="back-link">‚Üê Back to Portfolio</a>

    <h3 id="carousel-title" style="text-align:center; margin-bottom: 12px; font-size: 1.8rem; color: #f0f0f0;">
      Video 1
    </h3>

    <div class="carousel-container" aria-label="Video carousel">
      <button class="carousel-button prev" aria-label="Previous video">&#10094;</button>
      <div class="carousel-track">
        <div class="carousel-item">
          <iframe
            
            src="https://www.youtube.com/embed/QAuvAnSd4lE?si=22qwicf0KnZMj7mC"
            title="YouTube video player 1"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen>
          </iframe>
        </div>
        <div class="carousel-item">
          <iframe
            src="https://www.youtube.com/embed/r2-3Hujk7bM?si=jrtzDA09oQGRICpl"
            title="YouTube video player 2"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen>
          </iframe>
        </div>
        <div class="carousel-item">
          <iframe
            src="https://www.youtube.com/embed/kHPetIQbUus?si=gTiIHv2HxrehGSRU"
            title="YouTube video player 3"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen>
          </iframe>
        </div>
        <div class="carousel-item">
          <iframe
            src="https://www.youtube.com/embed/UDvrkH0EubA?si=HMsTXYE8RI2gJ0Ll"
            title="YouTube video player 4"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen>
          </iframe>
        </div>
        <div class="carousel-item">
          <iframe
            src="https://www.youtube.com/embed/3eUL1c3_2fw?si=nDqg1oJ-xKoNfQzO"
            title="YouTube video player 5"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen>
          </iframe>
        </div>
      </div>
      <button class="carousel-button next" aria-label="Next video">&#10095;</button>
    </div>

    <h2>Summary</h2>
  <p>
    This was a consultancy group project where we were asked to expand and improve the <strong>Heart Garden</strong>, an interactive environment which reacts to the users heart data, created in Unreal Engine. I led both the technical development and client communication aspects of this project. On the technical side, I created several key environment features, including a dynamic water system, reactive foliage (grass, trees, flowers), and an interactive bell. I also took the lead in communicating with the client helping shape loose ideas into the final product.
  </p>
  <p>
    <strong>Heart Garden</strong> connects to emWave Pro software via TCP, receiving real-time heart data from a sensor clipped to the user's earlobe. The software calculates a <i>coherence</i> value between 0 (stressed) and 1 (calm) -  this is designed for therapy sessions, where users can see their emotional state visualised in the changing environment. Both clients were very pleased with the result and even mentioned the potential for another academic paper based on this version of <strong>Heart Garden</strong>.
  </p>
  <h3>Water</h3>
  <p>
    
    To create a smooth transition between calm and stressed states, I used dynamic material instances controlled by a Lerp node, with coherence as the alpha. As coherence drops, the water material gradually changes to be  darker, murkier and more agitated by changing parameters like opacity, normal intensity, distortion and panning speed.  When coherence rises, it changes back to a bright, clearer surface. This change is improved by the skybox, which becomes grey and cloudy at low coherence, and then changes to a clear blue sky with bright sunlight as coherence increases, shown in the background of the video below.
    </p>

    <video autoplay loop muted playsinline width="80%" height="auto" style="display: block; margin: 20px auto; border: 1px solid #1b1b1b; border-radius: 8px;"><source src="docs/assets/HeartGardenPage/Water Demo.mp4"></video>
    <h3>Bell</h3>
    <p>
    To create a realistic swinging effect for the bell, I used a sine wave to simulate the oscillation and a lerp node to control it's amplitude, with coherence as the alpha. When coherence is high (> 0.7), the bell slows down and eventually stops. As coherence drops, the Lerp gets closer to the bell's max rotation, making the swing higher and more intense.
      
    This is much simpler than my original method of using an animation timeline and allows for easier control of amplitude and a gradual slow down at high coherence.
    </p>    

    <video autoplay loop muted playsinline width="80%" height="auto" style="display: block; margin: 20px auto; border: 1px solid #1b1b1b; border-radius: 8px;"><source src="docs/assets/HeartGardenPage/Bell Demo.mp4"></video>
    
  <img src="docs/assets/HeartGardenPage/Bell Swing Logic.png" style="width: 95%; height:auto; display: block; margin: 20px auto; border: 1px solid #1b1b1b; border-radius: 8px;">
</main>

  <script>
    (function() {
      const track = document.querySelector('.carousel-track');
      const prevBtn = document.querySelector('.carousel-button.prev');
      const nextBtn = document.querySelector('.carousel-button.next');
      const items = Array.from(track.children);
      const titleEl = document.getElementById('carousel-title');

      // Titles for each video slide
      const titles = [
        "Heart Garden - Meadow",
        "Heart Garden - Water",
        "Heart Garden - Trees",
        "Heart Garden - Meadow 2",
        "Heart Garden - Bell"
      ];

      let currentIndex = 0;

      function updateCarousel() {
        const width = items[0].getBoundingClientRect().width;
        track.style.transform = `translateX(-${currentIndex * width}px)`;
        titleEl.textContent = titles[currentIndex];
      }

      prevBtn.addEventListener('click', () => {
        currentIndex = (currentIndex === 0) ? items.length - 1 : currentIndex - 1;
        updateCarousel();
      });

      nextBtn.addEventListener('click', () => {
        currentIndex = (currentIndex === items.length - 1) ? 0 : currentIndex + 1;
        updateCarousel();
      });

      window.addEventListener('resize', updateCarousel);

      // Initialize heading and carousel position
      updateCarousel();
    })();
  </script>

  
</body>

</html>
